{% extends "base.html" %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<!-- Page Header -->
<div style="margin-bottom: 40px;">
    <h1 style="font-size: 48px; font-weight: 700; margin-bottom: 8px; letter-spacing: -0.02em;">Dashboard</h1>
    <p class="text-secondary" style="font-size: 18px; margin-bottom: 8px;">Welcome back, Ahmed</p>
    <p class="text-muted" style="font-size: 13px;">Sunday, February 15, 2026</p>
</div>

<!-- Quick Stats Grid - All Clickable -->
<div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 32px;">
    <!-- Active Pipeline -->
    <a href="/job-tracker" class="card" style="padding: 20px; text-decoration: none; color: inherit; transition: transform 0.2s, box-shadow 0.2s;" onmouseover="this.style.transform='translateY(-4px)'; this.style.boxShadow='0 8px 30px rgba(0,0,0,0.3)'" onmouseout="this.style.transform=''; this.style.boxShadow=''">
        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
            <div style="width: 40px; height: 40px; background: rgba(37, 99, 235, 0.15); border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-spinner" style="color: var(--brand); font-size: 18px;"></i>
            </div>
            <span class="text-muted" style="font-size: 13px;">Active Pipeline</span>
        </div>
        <div style="font-size: 30px; font-weight: 700; margin-bottom: 8px;">{{ stats.active_applications }}</div>
        <div style="display: flex; align-items: center; gap: 4px; font-size: 13px; color: var(--success);">
            <i class="fas fa-arrow-up"></i>
            <span>+{{ stats.active_applications }}</span>
            <span style="margin-left: auto; color: var(--brand);">View →</span>
        </div>
    </a>
    
    <!-- Job Applications -->
    <a href="/job-tracker" class="card" style="padding: 20px; text-decoration: none; color: inherit; transition: transform 0.2s, box-shadow 0.2s;" onmouseover="this.style.transform='translateY(-4px)'; this.style.boxShadow='0 8px 30px rgba(0,0,0,0.3)'" onmouseout="this.style.transform=''; this.style.boxShadow=''">
        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
            <div style="width: 40px; height: 40px; background: rgba(234, 179, 8, 0.15); border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-briefcase" style="color: var(--warning); font-size: 18px;"></i>
            </div>
            <span class="text-muted" style="font-size: 13px;">Job Applications</span>
        </div>
        <div style="font-size: 30px; font-weight: 700; margin-bottom: 8px;">{{ stats.total_applications }}</div>
        <div style="display: flex; align-items: center; gap: 4px; font-size: 13px; color: var(--success);">
            <i class="fas fa-arrow-up"></i>
            <span>+{{ stats.total_applications }}</span>
            <span style="margin-left: auto; color: var(--brand);">View →</span>
        </div>
    </a>
    
    <!-- Interviews -->
    <a href="/calendar" class="card" style="padding: 20px; text-decoration: none; color: inherit; transition: transform 0.2s, box-shadow 0.2s;" onmouseover="this.style.transform='translateY(-4px)'; this.style.boxShadow='0 8px 30px rgba(0,0,0,0.3)'" onmouseout="this.style.transform=''; this.style.boxShadow=''">
        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
            <div style="width: 40px; height: 40px; background: rgba(34, 197, 94, 0.15); border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-handshake" style="color: var(--success); font-size: 18px;"></i>
            </div>
            <span class="text-muted" style="font-size: 13px;">Interviews</span>
        </div>
        <div style="font-size: 30px; font-weight: 700; margin-bottom: 8px;">{{ stats.interviews }}</div>
        <div style="display: flex; align-items: center; gap: 4px; font-size: 13px; color: var(--text-secondary);">
            <i class="fas fa-minus"></i>
            <span>0</span>
            <span style="margin-left: auto; color: var(--brand);">Schedule →</span>
        </div>
    </a>
    
    <!-- Pending Follow-ups -->
    <a href="/notifications" class="card" style="padding: 20px; text-decoration: none; color: inherit; transition: transform 0.2s, box-shadow 0.2s;" onmouseover="this.style.transform='translateY(-4px)'; this.style.boxShadow='0 8px 30px rgba(0,0,0,0.3)'" onmouseout="this.style.transform=''; this.style.boxShadow=''">
        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
            <div style="width: 40px; height: 40px; background: rgba(239, 68, 68, 0.15); border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-bell" style="color: var(--error); font-size: 18px;"></i>
            </div>
            <span class="text-muted" style="font-size: 13px;">Pending Follow-ups</span>
        </div>
        <div style="font-size: 30px; font-weight: 700; margin-bottom: 8px;">{{ follow_ups|length }}</div>
        <div style="display: flex; align-items: center; gap: 4px; font-size: 13px; color: var(--error);">
            <i class="fas fa-arrow-down"></i>
            <span>-{{ follow_ups|length }}</span>
            <span style="margin-left: auto; color: var(--brand);">View →</span>
        </div>
    </a>
</div>

<!-- Quick Actions Bar -->
<div class="card" style="padding: 16px; margin-bottom: 24px;">
    <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 12px;">
        <span class="text-muted" style="font-size: 13px;">Quick Actions:</span>
        <div style="display: flex; gap: 12px; flex-wrap: wrap;">
            <a href="/cv-optimizer" class="btn btn-primary btn-md">
                <i class="fas fa-file-alt"></i> Generate CV
            </a>
            <a href="/job-tracker" class="btn btn-secondary btn-md">
                <i class="fas fa-plus"></i> Add Job
            </a>
            <a href="/content-factory" class="btn btn-secondary btn-md">
                <i class="fas fa-pen"></i> Create Post
            </a>
            <a href="/network" class="btn btn-secondary btn-md">
                <i class="fas fa-user-plus"></i> Add Contact
            </a>
        </div>
    </div>
</div>

<!-- Main Content - 2 Columns -->
<div style="display: grid; grid-template-columns: 1.2fr 0.8fr; gap: 24px;">
    <!-- Left Column -->
    <div style="display: flex; flex-direction: column; gap: 24px;">
        <!-- Recent Jobs - Clickable -->
        <div class="card" style="padding: 0; overflow: hidden;">
            <div style="background: var(--bg-elevated); border-bottom: 1px solid var(--border-subtle); padding: 12px 16px; display: flex; justify-content: space-between; align-items: center;">
                <span style="font-size: 13px; font-weight: 600; color: var(--text-secondary);">Recent Jobs</span>
                <a href="/job-tracker" class="btn btn-ghost btn-sm">View All</a>
            </div>
            <div>
                {% for status, jobs in pipeline.items() %}
                    {% for job in jobs[:3] %}
                    <a href="/job-tracker" style="text-decoration: none; color: inherit;">
                        <div style="padding: 16px; border-bottom: 1px solid var(--border-subtle); display: flex; justify-content: space-between; align-items: center; cursor: pointer; transition: background 0.2s;" onmouseover="this.style.background='var(--bg-elevated)'" onmouseout="this.style.background='transparent'">
                            <div>
                                <div style="font-size: 14px; font-weight: 500; color: var(--text-primary); margin-bottom: 4px;">{{ job.title }}</div>
                                <div class="text-muted" style="font-size: 13px;">{{ job.company }}</div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <span class="badge badge-blue">{{ status }}</span>
                                <i class="fas fa-chevron-right" style="color: var(--text-muted); font-size: 12px;"></i>
                            </div>
                        </div>
                    </a>
                    {% endfor %}
                {% endfor %}
                {% if not pipeline %}
                <div style="padding: 40px; text-align: center;">
                    <div class="text-muted" style="margin-bottom: 16px;">No jobs yet</div>
                    <a href="/job-tracker" class="btn btn-primary btn-sm">Add Your First Job</a>
                </div>
                {% endif %}
            </div>
        </div>
        
        <!-- Activity Feed - Interactive -->
        <div class="card" style="padding: 0; overflow: hidden;">
            <div style="background: var(--bg-elevated); border-bottom: 1px solid var(--border-subtle); padding: 12px 16px; display: flex; justify-content: space-between; align-items: center;">
                <span style="font-size: 13px; font-weight: 600; color: var(--text-secondary);">Recent Activity</span>
                <a href="/analytics" class="btn btn-ghost btn-sm">View Analytics</a>
            </div>
            <div style="padding: 16px;">
                <div style="display: flex; flex-direction: column; gap: 16px;">
                    {% if follow_ups %}
                        {% for job in follow_ups %}
                        <a href="/job-tracker" style="text-decoration: none; color: inherit;">
                            <div style="display: flex; align-items: center; gap: 12px; cursor: pointer; padding: 8px; border-radius: 8px; transition: background 0.2s;" onmouseover="this.style.background='var(--bg-elevated)'" onmouseout="this.style.background=''">
                                <div style="width: 32px; height: 32px; background: rgba(234, 179, 8, 0.15); border-radius: 100%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                                    <i class="fas fa-clock" style="color: var(--warning); font-size: 14px;"></i>
                                </div>
                                <div style="flex: 1;">
                                    <div style="font-size: 13px; font-weight: 500; color: var(--text-primary);">Follow-up needed</div>
                                    <div class="text-muted" style="font-size: 12px;">{{ job.title }} at {{ job.company }}</div>
                                </div>
                                <i class="fas fa-chevron-right" style="color: var(--text-muted); font-size: 12px;"></i>
                            </div>
                        </a>
                        {% endfor %}
                    {% else %}
                        <div class="text-muted" style="text-align: center; padding: 20px;">
                            <i class="fas fa-check-circle" style="color: var(--success); margin-bottom: 8px;"></i>
                            <div>No pending follow-ups</div>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    
    <!-- Right Column -->
    <div style="display: flex; flex-direction: column; gap: 24px;">
        <!-- 2nd Brain Stats - Clickable -->
        <a href="/second-brain" class="card" style="padding: 24px; text-decoration: none; color: inherit; transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform=''">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                <div style="display: flex; align-items: center; gap: 12px;">
                    <div style="width: 40px; height: 40px; background: rgba(139, 92, 246, 0.15); border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-brain" style="color: #8b5cf6; font-size: 18px;"></i>
                    </div>
                    <span style="font-size: 15px; font-weight: 600;">Knowledge Base</span>
                </div>
                <i class="fas fa-arrow-right" style="color: var(--text-muted);"></i>
            </div>
            <div style="font-size: 32px; font-weight: 700; margin-bottom: 8px;">{{ brain_stats.total_documents }}</div>
            <div class="text-muted" style="font-size: 13px;">{{ brain_stats.unique_terms }} unique terms indexed</div>
            <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid var(--border-subtle);">
                <div style="font-size: 12px; color: var(--brand);">Search your documents →</div>
            </div>
        </a>
        
        <!-- CVs Generated - Clickable -->
        <a href="/documents" class="card" style="padding: 24px; text-decoration: none; color: inherit; transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform=''">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                <div style="display: flex; align-items: center; gap: 12px;">
                    <div style="width: 40px; height: 40px; background: rgba(16, 185, 129, 0.15); border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-file-alt" style="color: var(--success); font-size: 18px;"></i>
                    </div>
                    <span style="font-size: 15px; font-weight: 600;">Generated CVs</span>
                </div>
                <i class="fas fa-arrow-right" style="color: var(--text-muted);"></i>
            </div>
            <div style="font-size: 32px; font-weight: 700; margin-bottom: 8px;">{{ stats.total_applications }}</div>
            <div class="text-muted" style="font-size: 13px;">Tailored for specific roles</div>
            <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid var(--border-subtle);">
                <div style="font-size: 12px; color: var(--brand);">View all CVs →</div>
            </div>
        </a>
        
        <!-- Network - Clickable -->
        <a href="/network" class="card" style="padding: 24px; text-decoration: none; color: inherit; transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform=''">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                <div style="display: flex; align-items: center; gap: 12px;">
                    <div style="width: 40px; height: 40px; background: rgba(59, 130, 246, 0.15); border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-network-wired" style="color: #3b82f6; font-size: 18px;"></i>
                    </div>
                    <span style="font-size: 15px; font-weight: 600;">Network</span>
                </div>
                <i class="fas fa-arrow-right" style="color: var(--text-muted);"></i>
            </div>
            <div style="font-size: 32px; font-weight: 700; margin-bottom: 8px;">0</div>
            <div class="text-muted" style="font-size: 13px;">Contacts tracked</div>
            <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid var(--border-subtle);">
                <div style="font-size: 12px; color: var(--brand);">Build your network →</div>
            </div>
        </a>
        
        <!-- Tools Quick Access -->
        <div class="card" style="padding: 20px;">
            <div style="font-size: 13px; font-weight: 600; color: var(--text-secondary); margin-bottom: 16px;">Quick Access</div>
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px;">
                <a href="/cv-optimizer" class="btn btn-ghost btn-sm" style="justify-content: flex-start;">
                    <i class="fas fa-magic"></i> CV
                </a>
                <a href="/content-factory" class="btn btn-ghost btn-sm" style="justify-content: flex-start;">
                    <i class="fas fa-pen-fancy"></i> Content
                </a>
                <a href="/calendar" class="btn btn-ghost btn-sm" style="justify-content: flex-start;">
                    <i class="fas fa-calendar"></i> Calendar
                </a>
                <a href="/analytics" class="btn btn-ghost btn-sm" style="justify-content: flex-start;">
                    <i class="fas fa-chart-line"></i> Analytics
                </a>
                <a href="/bookmarks" class="btn btn-ghost btn-sm" style="justify-content: flex-start;">
                    <i class="fas fa-bookmark"></i> Bookmarks
                </a>
                <a href="/product-management" class="btn btn-ghost btn-sm" style="justify-content: flex-start;">
                    <i class="fas fa-cogs"></i> Product
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
